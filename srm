#!/bin/bash
#
# Скрипт, позволяющий безопасно удалять файлы.
# Скрипт получает на вход файл, сжимает его и перемещает в корзину ~/RECYCLE.
# Файлы, хранящиеся в корзине более семи дней, удаляются.

# задание пути корзины

R=~/RECYCLE
echo $R

# Проверка существования корзины:

if [ ! -e $R ]
then
	echo "Создаём корзину"
	mkdir $R
fi


# проверка того, директория ли корзина

if [ ! -d $R ]
then
	echo "Корзина не является директорией!"
	exit
fi


# проверка существования файла

if [ ! -e $1 ]
then
	echo "Такого файла не существует!"
	exit
fi


# перемещение файла в корзину

mv -f $1 $R


# сжатие файла

if [ ! -e $R/$1.gz ]
then
	gzip $R/$1
else
	mv $R/$1 $R/$1_1
	gzip $R/$1_1
fi
